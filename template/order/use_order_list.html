<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>[[${str}]] | 卡劵管理</title>
<link th:href="@{{sp}/css/bootstrap.min.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/font-awesome/css/font-awesome.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/css/animate.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/css/style.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/jqui1114/jquery-ui.css(sp=${pub_bucket})}" rel="stylesheet">
<link th:href="@{{sp}/css/plugins/select2/select2.min.css(sp=${pub_bucket})}" rel="stylesheet">
<style>
#datatable-buttons_paginate{
display:none;
}
.dataTables_wrapper{
padding-bottom: 0px;
}
#DataTables_Table_0_paginate{
float:left;
}
#DataTables_Table_1_paginate{
float:right;
padding-top: 23px;
}
.dataTables_empty{
display:none;
}
#datatable-buttons{
display:none;
}
</style>
</head>

<body>
<div id="wrapper">
	<div th:replace="../common/nav"></div>
	<div id="page-wrapper" class="gray-bg">
		<div th:replace="../common/top"></div>
		<div class="row wrapper border-bottom white-bg page-heading">
			<div class="page-title">
		 
			<div class="pull-left"><h3></h3></div>
			<div class="pull-right">
			 <div class="input-group">
			   <input type="text" placeholder="手机号或者劵码或订单号进行查询" class="input-sm form-control " id="search_like" th:value="${key}"> <span class="input-group-btn">
               <button type="button" id="search_button" class="btn btn-sm btn-primary "> Go!</button>
			</span>
			</div>
			</div>
		</div>
		<div class="row">
	        <div class="col-md-12">
	            <div class="x_panel">
	                <div class="x_content">
	                    <table  class="table table-striped table-hover table-bordered">
	                        <thead>
	                            <tr>
	                                <th>识别号</th>
	                                <th>劵码</th>
	                                <th>手机号</th>
	                                <th>订单编号</th>
	                                <th>订单类型</th>
	                                <th>使用时间</th>
	                            </tr>
	                        </thead>
	                        <tbody>
	                              <div class="text-c odd" role="row" th:each="r : ${page.result}" varStatus="index">
	                            <tr id="tr_${r.id }">
	                                <td>[[${r.id}]]</td>
	                                <td>[[${r.code}]]</td>
	                                <td>[[${r.mobile}]]</td>
	                                <td>[[${r.order_no}]]</td>
	                                <td>[[${oc.get(r.oc) }]]</td>
	                                 <td>[[${r.c_time}]]</td>
	                            </tr>
	                            </div>
	                        </tbody>
	                    </table>
	                   <div th:replace="../common/page"></div>
	                </div>
	            </div>
	        </div>
	    </div> 

	</div>
</div>
    <!-- Mainly scripts -->
    <script th:src="@{{sp}/js/jquery-2.1.1.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/bootstrap.min.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/plugins/metisMenu/jquery.metisMenu.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/plugins/slimscroll/jquery.slimscroll.min.js(sp=${pub_bucket})}"></script>

    <!-- Custom and plugin javascript -->
    <script th:src="@{{sp}/js/inspinia.js(sp=${pub_bucket})}"></script>
    <script th:src="@{{sp}/js/plugins/pace/pace.min.js(sp=${pub_bucket})}"></script>
    
    <script th:src="@{{sp}/third/layer3/layer.js(sp=${pub_bucket})}" type="text/javascript"></script>
    <script th:src="@{{sp}/js/plugins/select2/select2.full.min.js(sp=${pub_bucket})}" type="text/javascript"></script>
    
    <script th:src="@{{sp}/jqui1114/jquery-ui.js(sp=${pub_bucket})}" type="text/javascript" charset="utf-8"></script>
    <script th:src="@{{sp}/jqui1114/jquery-ui-timepicker-addon.js(sp=${pub_bucket})}" type="text/javascript" charset="utf-8"></script>
    <script th:src="@{{sp}/jqui1114/jquery-ui-timepicker-zh-CN.js(sp=${pub_bucket})}" type="text/javascript" charset="utf-8"></script>
    
    <!-- Datatables -->
    <script th:src="|${pub_bucket}/datatables.net/js/jquery.dataTables.js|"></script>
    <script th:src="|${pub_bucket}/datatables.net-bs/js/dataTables.bootstrap.min.js|"></script>
    <script th:src="|${pub_bucket}/datatables.net-buttons/js/dataTables.buttons.min.js|"></script>
    <script th:src="|${pub_bucket}/datatables.net-buttons-bs/js/buttons.bootstrap.min.js|"></script>
    <script th:src="|${pub_bucket}/datatables.net-buttons/js/buttons.flash.min.js|"></script>
	<script th:src="|${pub_bucket}/datatables.net-buttons/js/buttons.html5.min.js|"></script>
	<script th:src="|${pub_bucket}/datatables.net-buttons/js/buttons.print.js|"></script>

	<script>
		$(document).ready(function() {

			$('#loading-example-btn').click(function() {
				btn = $(this);
				simpleLoad(btn, true)

				// Ajax example
				//                $.ajax().always(function () {
				//                    simpleLoad($(this), false)
				//                });

				simpleLoad(btn, false)
			}); 
		});

		function simpleLoad(btn, state) {
			if (state) {
				btn.children().addClass('fa-spin');
				btn.contents().last().replaceWith(" Loading");
			} else {
				setTimeout(function() {
					btn.children().removeClass('fa-spin');
					btn.contents().last().replaceWith(" Refresh");
				}, 2000);
			}
		}
	</script>
</body>
<script type="text/javascript">
	$(function(){
		
		$("#search_button").on("click",function(){
		      var key = $("#search_like").val();
	          location.href = "[[${contextPath}]]/order/use_order_list?key="+key+ "&" + Date.parse(new Date());
        });
});
</script>
</html>
